# [REPORT] План разработки инструмента для анализа клиентских данных с использованием `Python` и `PyQt`

**Список команды и роли:**

1. Fullstack-разработчики: Бедин Владислав (Тимлид), Киян Георгий
2. Аналитик данных / Администратор базы данных: Букарев Кирилл
3. UI/UX-дизайнер: Гаврилова Дженнет
4. Тестировщик / Документатор / Администратор базы данных: Вельдяева Александра

**Fullstack-разработчики (Frontend & Backend):**

* Инициализация проекта `PyQT`.
* Реализация базового интерфейса для загрузки файлов.
* Настройка отображения данных таблицы.
* Подключение локальной базы данных `SQLite` для хранения загруженных данных.
* Включение функций фильтра к интерфейсу.
* Оптимизация интерфейса.
* Добавление инструкций по работе с приложением.

**Аналитик данных:**

* Настройка обработки данных с использованием `Pandas`.
* Реализация вычислений ключевых метрик.
* Настройка функций фильтрации данных.
* Построение графиков с использованием `Matplotlib`.
* Тестирование вычисления ключевых метрик.

**UI/UX-дизайнер:**

* Разработка макетов интерфейса (загрузка данных, таблиц, графиков).
* Создание диаграммы вариантов использования (варианты использования).
* Доработка интерфейса (анимации, обработка ошибок).
* Уточнение визуального стиля.

**Тестировщик / Документатор:**

* Проверка обработки данных, фильтрация и построение графиков.
* Завершение технической документации:
  * UML-диаграммы.
  * Подробное описание методов анализа данных.
* Составление пользовательской документации:
  * Руководство по работе с приложением.

## Отчеты по дням

### День 1

1. Были проведены распределения по обязанностям.
2. Frontend-разработчики: Создан скелет приложения
3. UI/UX-дизайнер: Было придумано название и цветовая палитра для разрабатываемого приложения.
4. Аналитик данных / Администратор базы данных: Предоставленны тестовые данные для программы.
5. Тестировщик / Документатор / Администратор базы данных: Проведен сбор информации о ходе проекта и составлен отчёт по данному дню о ходе работы.

### День 2

**1. Fullstack-разработчики:**

* Теперь после закрытия приложения автоматически загружается крайний открытый в приложении csv-файл, если он вообще был открыт.
* Код разделён на модули: модель, начертание графиков, статика (шрифты, изображения, стили), ui, манипуляции с данными (БД).
* Круговая диаграмма теперь основана на диапазонах, а не на конкретных значениях (пока что корректно работает лишь для столбца "возраст").
* Исправлена ошибка, при которой из-за несоответствия кодировки не импортировался большой файл-csv с кириллицей в строка.
* Рефакторинг кода.
* Начата базовая документация кода на русском языке.
* Изменена иконка приложения.

**2. UI/UX-дизайнер:**

* Была придумана и создана иконка для будующего приложения.

**3. Аналитик данных / Администратор базы данных:**

* Был проведен анализ данных клиентов Озон.
* Обновленние таблицы для базы данных.

**4. Тестировщик / Документатор / Администратор базы данных:**

* Были предоставленны данные для таблицы базы данных.
* Составлен отчет за второй день.

### День 3

**1. Fullstack-разработчики:**

* Свёрстан базовый адаптивный интерфейс приложения на `Qt Designer`.
* Добавлен конвертер для csv-файлов, который удаляет лишние пробелы.
* Реорганизована структура проекта: добавлены папки с тестовыми csv-данными,
* Дополнено `README.md`.

**2. UI/UX-дизайнер:**

* Добавлена основная иконка в формате .svg
* Разработаны иконки:
  * Сохранение;
  * Выбор файла;
  * Построение графика;
  * Стрелка выбора из всплывающего списка.

**3. Аналитик данных / Администратор базы данных:**

* Создана база данных `ozon_test_data.csv`.
* Проведен тест баз данных:
  * `ozon_test_data.csv`;
  * `fitness_test_data.csv`.

**4. Тестировщик / Документатор / Администратор базы данных:**

* Изменена структура папок и файлов документации.
* Создана база данных `fitness_test_data.csv`.
* Проведена документация проекта.
* Составлен отчет за третий день.

### День 4

**1. Fullstack-разработчики:**

* Переработан макет фронтенда.
* Проект полностью подготовлен к интеграции фронтенда.
* Импортированы некоторые ресурсы (иконки).
* Основные функции бекэнда объединены с UI фронтэнда.

**2. UI/UX-дизайнер:**

* Поправлены некоторые css-стили.
* Начата работа над полноэкранным просмотром графиков.

**3. Аналитик данных / Администратор базы данных:**

* Создана база данных `bank_deposit_test_data.csv`.
* Проанализирована база данных `bank_deposit_test_data.csv`.

**4. Тестировщик / Документатор / Администратор базы данных:**

* Создана база данных `programming_courses_test_data.csv`.
* Проанализирована база данных `programming_courses_test_data.csv`.
* Составлен отчет за четвертый день.

### День 5

**1. Fullstack-разработчики:**

* Теперь приложение открывается в полный экран.
* Исправлен баг, при котором после появления графика или возникновения ошибки формата данных открывался второй пустой график.
* Проведён доскональный рефакторинг всей бизнес-логики.
* Проведена реструктуризация проекта.

**2. UI/UX-дизайнер:**

* Текущий фронтэнд-макет полностью связан с бэкэнд логикой.

**3. Аналитик данных / Администратор базы данных:**

* Теперь график открывается в полный экран.
* Файлы документации выделены в отдельную папку.
* Удалена лишняя папка с тех. заданием.

**4. Тестировщик / Документатор / Администратор базы данных:**

* Прописана дополнительная обработка исключений (формат данных, пустая таблица, непредвиденная ошибка).
* Удалён лишний .gitignore-файл.
* Составлен отчет за пятый день.

### День 6

**1. Fullstack-разработчики:**

* Исправлен баг, при котором в приложении не отображались иконки (PyQt6 запретил пользоваться ресурсными qrc-файлами, поэтому теперь импорт идёт напрямую через проект).
* Исправлен баг, при котором невозможно было выбрать новый csv-файл для анализа.
* Исправлен баг, при котором не работала кнопка "Выбрать файл".
* В скрипте `plot_handler.py` переработана бизнес-логика.
* Улучшена круговая диаграмма. Теперь её график строится, ограничивая количество категорий в легенде.
* Исправлен баг, при которой после построения графика с некорректными данными и вызова предупреждения об этом, выводился пустой график.
* Реализована функция сортировки данных по убыванию/возрастанию столбца.

**2. UI/UX-дизайнер:**

* Переделан фронтэнд-макет приложения.
* Добавлены новые кнопки и поля заполнения, связанные с сортировкой.
* Начата разработка более адаптивного интерфейса.
  
**3. Аналитик данных / Администратор базы данных:**

* Рефакторинг скрипта `main_window.py`.
* Проведён рефакторинг скрипта `plot_handler.py`.
* Удалена лишняя функция `_create_and_show_plot` из скрипта `main_window.py`.

**4. Тестировщик / Документатор / Администратор базы данных:**

* Изменена логика привязки элементов во фронтенд-макете `client_data_analising_tool.py` (В будущем необходимо сделать более весомый рефакторинг: выделить стили css отдельно от макета).
* Проведён рефакторинг скрипта UI-макета (client_data_analising_tool.py).
* Составлен отчет за шестой день.

### День 7

**1. Fullstack-разработчики:**

* Добавлены автоматические сохранения данных в базу данных `SQLite` при закрытии приложения, изменения данных и открытии файла.
* Сохранение информации в базу  работает теперь исправно, после некоторых весомых изменений в коде несколько версий назад сохранение не работало.
* Исправлена ошибка, при которой главное окно открывалось некорректно.
* Добавлена кнопка `Создать отчёт` (в будущем её нужно переместить в панель сортировки, сразу после кнопки `Отсортировать`).
* К скрипту `main_window.py` подвязана кнопка `Создать отчёт` и соответствующий скрипт `report_generator.py`.
* Реализована функция создания PDF-отчёта.

**2. UI/UX-дизайнер:**

* Проведён рефакторинг UI-макета `client_data_analising_tool.py`.
* Исправлено кривое отображение графика в главном окне, теперь график открывается в отдельном окне.

**3. Аналитик данных / Администратор базы данных:**

* Значительно улучшена бизнес-логика всех типов графиков.
* Сменили кодировку принимаемых `CSV` файлов, с `cp1251` на `utf-8`. Так приложение работает стабильнее и упрощает сохранение `CSV` файлов.

**4. Тестировщик / Документатор / Администратор базы данных:**

* Добавлена инструкция по сохранению `CSV` файла в кодировке `utf-8`.
* Составлен отчет за седьмой день.

### День 8

**1. Fullstack-разработчики:**

* Re-structed:
  * Проведён конечный рефакторинг всего проекта.
  * Полностью изменена структура проекта.
  * Проведена конечная техническая документация всего проекта.
  * Удалён неиспользуемый конвертер csv-файлов.
  * Переименованы скрипты: `data_handling.py` в `data_handler.py`, `report_generator.py` в `report_handler.py`, `client_data_analising_tool.py` в `gui_main_window.py`.

* Feat:
  * Полностью изменена бизнес-логика построения графиков. Теперь все графики отображаются корректно и красиво.
  * Подвязана логика раскрытия таблицы в отдельном окне по нажатию на кнопку "Раскрыть таблицу".
  * Исправлена кодировка старых таблиц.

* Fix: (исправлены баги, найденные тестировщиком в этом коммите)
  * Исправлен баг при котором слишком длинный путь выталкивал кнопки за края экрана.
  * Исправлен баг, при котором, не строились графики из-за больших значений.
  * Исправлены ошибки в линейном графике (Доход/Возраст).
  * Исправлена некорректная обработка больших числовых значений.
  * Исправлен краш программы из-за ввода некорректных данных в линейном графике.
  * Исправлено наслаиваемое друг на друга отображение меток осей X и Y на диаграмме рассеяния, линейном и столбчатом графике при большом объёме входных данных.
  * Исправлен баг, при котором приложение закрывалось при выборе csv-файла кодировка, которого отличается от `utf-8`.
  
**2. UI/UX-дизайнер:**

* Изменены уже существующие иконки.
* Добавлена иконка для кнопки открытия на полный экран.
* Добавлены недостающие иконки для кнопок.
* Добавлена кнопка "Раскрыть таблицу" в скрипте `gui_main_window.py` (`client_data_analising_tool.py`).

**3. Аналитик данных / Администратор базы данных:**

* Доделаны 5 конечных баз данных, которые будут анализироваться приложением.
* Базы данных импортированы в проект.

**4. Тестировщик / Документатор / Администратор базы данных:**

* Найдены ошибки в тестировании приложения:
  * Слишком длинный текст пути в верхней панели. Выталкивает кнопки за края экрана.
  * Невозможно построить график с большими значениями.
  * Некорректная обработка данных с большими числовыми значениями.
  * Наслаивание друг на друга отображение меток осей X и Y на диаграмме рассеяния, линейном и столбчатом графике при большом объёме входных данных.
  * Приложение закрывается при выборе csv-файла кодировка, которого отличается от `utf-8`.
* Завершена проектная документация всего приложения.
* Составлен отчет за восьмой день.
